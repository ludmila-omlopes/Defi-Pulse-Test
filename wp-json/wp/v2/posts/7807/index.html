{"id":7807,"date":"2019-12-11T16:16:20","date_gmt":"2019-12-11T21:16:20","guid":{"rendered":"https:\/\/defipulse.com\/blog\/?p=7807"},"modified":"2019-12-11T16:16:20","modified_gmt":"2019-12-11T21:16:20","slug":"how-ethereums-istanbul-network-upgrade-affects-defi","status":"publish","type":"post","link":"http:\/\/127.0.0.1\/wordpress\/2019\/12\/11\/how-ethereums-istanbul-network-upgrade-affects-defi\/","title":{"rendered":"How Ethereum&#8217;s Istanbul Network Upgrade Affects DeFi"},"content":{"rendered":"<p>At 12:25 AM (UTC) on December 8th, 2019, the Ethereum network mined block 9,069,000 activating the Istanbul network upgrade. Let&#8217;s take a look at how the upgrade might affect existing and future DeFi applications.<\/p>\n<h3>So what&#8217;s changed with the Istanbul Upgrade?<\/h3>\n<p>Istanbul included 6 Ethereum Improvement Proposals (EIPs).<\/p>\n<h4>EIP-152: Add Blake2 compression function `F` precompile<\/h4>\n<p><a href=\"https:\/\/github.com\/ethereum\/EIPs\/issues\/152\">EIP-152<\/a>\u00a0introduces\u00a0a new precompiled contract which implements the compression function F used in the BLAKE2b cryptographic hashing algorithm. Put simply, this EIP creates new interoperability and\u00a0privacy capabilities for Ethereum smart contracts.\u00a0BLAKE2b allows for efficient verification of the Equihash PoW used in Zcash which means that Ethereum smart contracts could act like SPV clients.<\/p>\n<p>In a nutshell, it&#8217;s now possible for DeFi protocols to perform trustless atomic swaps between Ethereum and Zcash, tapping into its inherent privacy features.<\/p>\n<h4>EIP-1108: Reduce alt_bn128 precompile gas costs<\/h4>\n<p>Changes in 2018 to the underlying library used by the official Go reference implementation led to significant performance gains for precompiled contracts on the alt_bn128 elliptic curve. Logically, performance gains means faster operations on Ethereum clients. And so,\u00a0<a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-1108\">EIP-1108<\/a> aims to reduce the gas cost for\u00a0elliptic curve arithmetic precompiles to account for these performance gains.<\/p>\n<p>All in all, DeFi privacy and scaling solutions built on Ethereum which utilize these precompiles cost less gas now. This is a big win for DeFi users because it makes zk-SNARKs cheaper.<\/p>\n<h4>EIP-1344: ChainID opcode<\/h4>\n<p>Originally introduced in <a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-155\">EIP-155<\/a> to prevent replay attacks during the ETC hardfork, Chain ID is another way to indicate which blockchain your node or DApp follows. <a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-1344\">EIP-1344<\/a>\u00a0adds an opcode to Ethereum which returns the current chain&#8217;s ID.<\/p>\n<p>Currently, developers must manually hardcode specific chain IDs into their clients, smart contracts, etc. You can probably see how that might lead to human error among other unintended consequences. This EIP now allows EVM-based DeFi applications to verify chain IDs, handle potential network upgrades, and\/or mitigate failures, which is particularly useful for layer 2 solutions.<\/p>\n<h4>EIP-1884: Repricing for trie-size-dependent opcodes<\/h4>\n<p>As the Ethereum network grew, so did the resources required for some opcodes. <a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-1884\">EIP-1884<\/a> raises the gas costs for these opcodes in an attempt to find a balance between operation cost and resources consumed.<\/p>\n<p>This EIP may break smart contracts which were designed around these opcodes and static gas costs. However, the tradeoff is that changing the gas cost prevents contracts from abusing underpriced but highly intensive opcodes and clogging the network.<\/p>\n<h4>EIP-2028: Transaction data gas cost reduction<\/h4>\n<p><a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-2028\">EIP-2028<\/a>\u00a0reduced the gas cost of Calldata from\u00a068 gas per byte to 16 gas per byte. In other words, less gas per byte means more bytes per block resulting scaling benefits from higher calldata bandwidth.<\/p>\n<p>Most of all, DeFi applications and layer 2 solutions using zk-SNARKs and zk-STARKs are now cheaper because of the cost reduction for calling data within transactions. Additonally, layer 2 solutions benefit from a potential throughput increase.<\/p>\n<h4>EIP-2200: Net gas metering for SSTORE operations<\/h4>\n<p>EIP-2200 implements a structured definition of net gas metering changes for SSTORE opcode. Simply put, it changes the cost calculation of storage in the EVM and will enable contracts to introduce new functions such as re-entry locks and same-contract multi-send.<\/p>\n<h4>In general, network upgrades can cause disruptions to node operators<\/h4>\n<p>Network upgrades require a lot of coordination to pull off. There&#8217;s plenty of room for human error when it comes to making sure each node is upgraded and ready. If a DeFi application relies on a node and then that node becomes desynchronized from the rest of the network, it may prevent you from using certain features or the DApp entirely until the team puts out a fix.<\/p>\n<h3>Now that Istanbul&#8217;s live, what&#8217;s next for the Ethereum network?<\/h3>\n<p>Muir Glacier Upgrade&#8217;s slated for activation on Block #9,200,000 or rather January 6th, 2020. This upgrade includes <a href=\"https:\/\/eips.ethereum.org\/EIPS\/eip-2384\">one EIP<\/a> titled, &#8220;EIP 2384: Muir Glacier Difficulty Bomb Delay.&#8221; As of October 5th, 2019, the difficulty bombed kicked in again slowing Ethereum blocktimes to over 13 seconds on average. As you might have guessed, slower Ethereum blocktimes impacts the performance of DeFi protocols and DApps. And so, EIP-2384\u00a0proposes to delay the difficulty bomb for another 4,000,000 blocks (~611 days).<\/p>\n<p><span style=\"font-weight: 400;\">F<\/span>ollow us on\u00a0<a href=\"https:\/\/twitter.com\/defipulse\">Twitter<\/a>\u00a0or join us in\u00a0<span style=\"font-weight: 400;\">our\u00a0<a href=\"https:\/\/discord.gg\/y7qSf4A\" target=\"_blank\" rel=\"noopener noreferrer\">Discord<\/a>\u00a0to keep up with the DeFi ecosystem<\/span><\/p>\n","protected":false},"excerpt":{"rendered":"<p>At 12:25 AM (UTC) on December 8th, 2019, the Ethereum network mined block 9,069,000 activating the Istanbul network upgrade. Let&#8217;s&#8230;<\/p>\n","protected":false},"author":1,"featured_media":7819,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,9,15,16],"tags":[74,75,108,147,287],"amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/posts\/7807"}],"collection":[{"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/comments?post=7807"}],"version-history":[{"count":0,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/posts\/7807\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/media\/7819"}],"wp:attachment":[{"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/media?parent=7807"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/categories?post=7807"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/127.0.0.1\/wordpress\/wp-json\/wp\/v2\/tags?post=7807"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}